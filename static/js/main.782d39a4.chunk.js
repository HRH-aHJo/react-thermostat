(this["webpackJsonpreact-thermostat"]=this["webpackJsonpreact-thermostat"]||[]).push([[0],{229:function(e,t,a){e.exports=a(449)},449:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(17),c=a.n(i),l=a(30),o=a(9),m=a(179),s=a(189),u=a(481),d=a(485),h=a(188),g=a.n(h),p=a(486),f=a(187),E=a.n(f),v=a(482),y=a(483),b=a(484),k=a(476),j=a(477),x=a(478),O=a(452),w=a(480),C=a(164),N=a(165),S=a(190),T=a(166),F=a(191),R=a(78),D=a(105),L=a.n(D),B=a(167),K={unit:"\xb0C"},W=Object(n.createContext)(K),H=function(e,t){switch(t.type){case"SET_UNIT":return Object(R.a)({},e,{unit:t.payload});default:return e}};function z(e){var t=e.children;return r.a.createElement(W.Provider,{value:Object(n.useReducer)(H,K)},t)}function A(){return Object(n.useContext)(W)}var M=a(75),I=a(22),_=["#332288","#88CCEE","#44AA99"],U=Object(m.a)((function(e){return{paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},margin:{marginTop:60}}})),G=function(e){var t=Object(M.a)(),a=A(),n=Object(l.a)(a,1)[0],i=U(),c=e.error?"Error! ".concat(e.error):"Loading ...",o=e.error?"secondary":"inherit";if(!e.data||!e.dataKeys||e.isLoading)return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Chart"),r.a.createElement(B.WindMillLoading,null),r.a.createElement(k.a,{"data-testid":"message",className:i.margin,component:"h6",variant:"caption",color:o,align:"center"},c));var m,s;return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Chart"),r.a.createElement(k.a,{"data-testid":"date-range",component:"h6",variant:"caption",color:"inherit",align:"center"},e.dateRange),r.a.createElement(I.f,null,r.a.createElement(I.e,{data:(m=e.data,s=n.unit,m&&m[0]?s===m[0].unit?m:m.map((function(t){var a=[];return e.dataKeys.forEach((function(e){var n,r,i;a[e.key]=(n=t[e.key],r=t.unit,i=s,"\xb0C"===r&&"\xb0F"===i?9*n/5+32:"\xb0F"===r&&"\xb0C"===i?5*(n-32)/9:void 0).toFixed(2)})),Object(R.a)({},t,{},a)})):null),margin:{top:16,right:16,bottom:0,left:24}},r.a.createElement(I.a,{strokeDasharray:"4 4",opacity:"0.2"}),r.a.createElement(I.h,{dataKey:"time",tickFormatter:function(e){return L()(e).format("HH:mm")}}),r.a.createElement(I.i,null,r.a.createElement(I.b,{angle:270,position:"left",style:{textAnchor:"middle",fill:t.palette.text.primary}},"Tempreture (".concat(n.unit,")"))),r.a.createElement(I.g,{content:r.a.createElement((function(e){var t=e.active,a=e.payload,c=e.label;return t?r.a.createElement(O.a,{className:i.paper},r.a.createElement("div",null,r.a.createElement("p",null,L()(c).format("DD MMM HH:mm")),a.map((function(e,t){var a={padding:0,marginRight:5,marginTop:5,display:"inline-block",backgroundColor:e.stroke,borderRadius:"50%",width:12,height:12};return r.a.createElement("div",{key:t},r.a.createElement("span",{style:a}),r.a.createElement("span",{style:{display:"inline-block",width:40}},e.value)," ",n.unit)})))):null}),null),cursor:{fill:"rgba(206, 206, 206, 0.2)"}}),r.a.createElement(I.c,null),e.dataKeys.map((function(e,t){return r.a.createElement(I.d,{key:t,dot:!1,type:"monotone",name:e.name,dataKey:e.key,stroke:_[t]})})))))},J=function(e){function t(e){var a;return Object(C.a)(this,t),(a=Object(S.a)(this,Object(T.a)(t).call(this,e))).state={data:null,isLoading:!0,dateRange:null,chartData:null,chartKeys:null,error:null},a}return Object(F.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({error:null,isLoading:!0}),fetch("https://raw.githubusercontent.com/ParityInc/backend-assignment/master/thermostat.json").then((function(e){if(!e.ok)throw e;return e.json()})).then((function(t){var a=[],n=[],r=t.date;t.point_data.forEach((function(e){a.push({key:e.id,name:e.name}),0===n.length?n=e.graph_data.map((function(t){var a={time:t.x,unit:e.unit};return a[e.id]=t.actual,a})):e.graph_data.forEach((function(t){var a=n.filter((function(e){return e.time===t.x}));a&&(a[0][e.id]=t.actual)}))})),e.setState({data:t,chartData:n,chartKeys:a,dateRange:r,isLoading:!1})})).catch((function(t){t.text().then((function(t){return e.setState({error:t,isLoading:!1})}))}))}},{key:"render",value:function(){return r.a.createElement(G,{data:this.state.chartData,dataKeys:this.state.chartKeys,dateRange:this.state.dateRange,isLoading:this.state.isLoading,error:this.state.error})}}]),t}(n.Component),P=a(181),$=a.n(P),q=a(183),Q=a.n(q),V=a(182),X=a.n(V),Y=a(184),Z=a.n(Y),ee=a(185),te=a.n(ee),ae=a(479),ne={marginTop:6,width:"40px",whiteSpace:"nowrap"},re=Object(m.a)((function(e){return{margin:{marginRight:5}}}));function ie(e){var t=Object(n.useState)("off"),a=Object(l.a)(t,2),i=a[0],c=a[1];Object(n.useEffect)((function(){e.onChange&&e.onChange(i)}),[e,i]);var o=re(),m=function(e){c(e.currentTarget.value)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},"Status"),r.a.createElement(j.a,{maxWidth:"lg"},r.a.createElement(x.a,{container:!0,spacing:3,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(x.a,{item:!0,xs:4,sm:2},r.a.createElement(ae.a,{"data-testid":"off-switch",onClick:m,value:"off",variant:"contained",color:"off"===i?"primary":"default"},r.a.createElement(x.a,{container:!0,justify:"center"},r.a.createElement($.a,{fontSize:"large",className:o.margin}),r.a.createElement("div",{style:ne},"OFF")))),r.a.createElement(x.a,{item:!0,xs:4,sm:2},r.a.createElement(ae.a,{"data-testid":"cool-switch",onClick:m,value:"cool",variant:"contained",color:"cool"===i?"primary":"default"},r.a.createElement(x.a,{container:!0,justify:"center"},r.a.createElement(X.a,{fontSize:"large",className:o.margin}),r.a.createElement("div",{style:ne},"COOL")))),r.a.createElement(x.a,{item:!0,xs:4,sm:2},r.a.createElement(ae.a,{"data-testid":"heat-switch",onClick:m,value:"heat",variant:"contained",color:"heat"===i?"primary":"default"},r.a.createElement(x.a,{container:!0,justify:"center"},r.a.createElement(Q.a,{fontSize:"large",className:o.margin}),r.a.createElement("div",{style:ne},"HEAT")))),r.a.createElement(x.a,{item:!0,xs:4,sm:2},r.a.createElement(ae.a,{"data-testid":"fan-switch",onClick:m,value:"fan",variant:"contained",color:"fan"===i?"primary":"default"},r.a.createElement(x.a,{container:!0,justify:"center"},r.a.createElement(Z.a,{fontSize:"large",className:o.margin}),r.a.createElement("div",{style:ne},"FAN")))),r.a.createElement(x.a,{item:!0,xs:4,sm:2},r.a.createElement(ae.a,{"data-testid":"auto-switch",onClick:m,value:"auto",variant:"contained",color:"auto"===i?"primary":"default"},r.a.createElement(x.a,{container:!0,justify:"center"},r.a.createElement(te.a,{fontSize:"large",className:o.margin}),r.a.createElement("div",{style:ne},"AUTO")))))))}var ce=Object(m.a)((function(){return{margin:{marginRight:5,height:48,minWidth:50,border:"1px solid rgba(255, 255, 255, 0.12)"}}})),le=function(){var e=A(),t=Object(l.a)(e,2),a=t[0],n=t[1],i=ce();return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{title:"Toggle unit"},r.a.createElement(ae.a,{size:"small","data-testid":"unit-button",className:i.margin,color:"inherit",onClick:function(){n({type:"SET_UNIT",payload:"\xb0C"===a.unit?"\xb0F":"\xb0C"})}},r.a.createElement("div",{"data-testid":"unit-text"},"\xb0C"===a.unit?"\xb0F":"\xb0C"))))},oe=Object(m.a)((function(e){return{root:{display:"flex"},toolbar:{paddingRight:0},appBar:{transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},title:{flexGrow:1},appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:320}}}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement((function(){var e=Object(w.a)("(prefers-color-scheme: dark)"),t=Object(n.useState)(!1),a=Object(l.a)(t,2),i=a[0],c=a[1],m=Object(n.useCallback)((function(){var t=i;return t||(t=e?"dark":"light"),t}),[i,e]),h=r.a.useMemo((function(){return Object(s.a)({palette:{type:m()}})}),[m]),f=oe(),C=Object(o.a)(f.paper,f.fixedHeight);return r.a.createElement(u.a,{theme:h},r.a.createElement(z,null,r.a.createElement("div",{className:f.root},r.a.createElement(v.a,null),r.a.createElement(y.a,{position:"absolute",color:"primary"},r.a.createElement(b.a,null,r.a.createElement(k.a,{component:"h1",variant:"h6",noWrap:!0,className:f.title},"Dashboard"),r.a.createElement(k.a,{component:"h1",variant:"h6",noWrap:!0,className:f.title},"Eco Thermostat",r.a.createElement(E.a,null)),r.a.createElement(le,null),r.a.createElement(p.a,{title:"Toggle light/dark theme"},r.a.createElement(d.a,{value:"check",selected:"dark"===m(),onChange:function(){c("dark"===m()?"light":"dark")}},r.a.createElement(g.a,null))))),r.a.createElement("main",{className:f.content},r.a.createElement("div",{className:f.appBarSpacer}),r.a.createElement(j.a,{maxWidth:"lg",className:f.container},r.a.createElement(x.a,{container:!0,spacing:3},r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(O.a,{className:f.paper},r.a.createElement(ie,null))),r.a.createElement(x.a,{item:!0,xs:12},r.a.createElement(O.a,{className:C},r.a.createElement(J,null)))))))))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[229,1,2]]]);
//# sourceMappingURL=main.782d39a4.chunk.js.map